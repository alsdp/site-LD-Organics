<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>LD Organics - Plateforme d'achat</title>
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome pour les icônes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-top">
                <a href="#home" class="logo">
                    <img src="https://i.goopics.net/ugbggy.png" alt="LD Organics" class="logo-img">
                    <div class="logo-text">LD<span>Organics</span></div>
                </a>
                <nav>
                    <ul>
                        <li><a href="#home">Accueil</a></li>
                        <li><a href="#products">Produits</a></li>
                        <li><a href="#about">À propos</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
                <div class="header-actions">
                    <div class="client-space">
                        <button class="client-space-btn" id="clientSpaceLink">
                            <i class="fas fa-user"></i> Espace Client <i class="fas fa-chevron-down" style="margin-left:5px;font-size:12px;"></i>
                        </button>
                        <div class="dropdown-menu" id="dropdownMenu">
                            <a href="#" id="createAccountOption"><i class="fas fa-user-plus"></i> Créer un compte</a>
                            <a href="#" id="loginOption"><i class="fas fa-sign-in-alt"></i> Se connecter</a>
                            <a href="#" id="myAccountOption" style="display:none;"><i class="fas fa-user-circle"></i> Mon compte</a>
                            <a href="#" id="adminLink" style="display:none;"><i class="fas fa-user-shield"></i> Administration</a>
                            <a href="#" id="operatorLink" style="display:none;"><i class="fas fa-tasks"></i> Opérateur commandes</a>
                            <a href="#" id="logoutOption" style="display:none;"><i class="fas fa-sign-out-alt"></i> Déconnexion</a>
                        </div>
                    </div>
                    <button class="cart-btn" onclick="openCartModal()">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="container">
                <h1>Produits CBD de Qualité Supérieure</h1>
                <p>Découvrez notre sélection exclusive de produits au CBD pour votre bien-être quotidien. Naturel, biologique et testé en laboratoire.</p>
                <a href="#products" class="btn">
                    <i class="fas fa-leaf"></i> Découvrir nos produits
                </a>
            </div>
        </section>

        <section id="products" class="featured-products">
            <div class="container">
                <h2 class="section-title">Nos Produits Premium</h2>
                <div class="products-grid" id="featuredProductsGrid">
                    <!-- Produits affichés dynamiquement -->
                </div>
            </div>
        </section>
    </main>

    <!-- Modales -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> Connexion</h2>
                <button class="close-modal" onclick="closeModal('loginModal')">&times;</button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Mot de passe</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="form-submit">Se connecter</button>
            </form>
        </div>
    </div>

    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus"></i> Créer un compte</h2>
                <button class="close-modal" onclick="closeModal('registerModal')">&times;</button>
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">Nom complet</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPhone">Numéro de téléphone</label>
                    <input type="tel" id="registerPhone">
                </div>
                <div class="form-group">
                    <label for="registerAddress">Adresse</label>
                    <textarea id="registerAddress" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Mot de passe</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirmer le mot de passe</label>
                    <input type="password" id="registerConfirmPassword" required>
                </div>
                <button type="submit" class="form-submit">Créer mon compte</button>
            </form>
        </div>
    </div>

    <div id="cartModal" class="modal">
        <div class="modal-content cart-modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-shopping-cart"></i> Mon panier</h2>
                <button class="close-modal" onclick="closeModal('cartModal')">&times;</button>
            </div>
            <div class="cart-items" id="cartItems">
                <!-- Articles du panier affichés dynamiquement -->
            </div>
            <div class="cart-total" id="cartTotal">Total: 0,00 $</div>
            <button class="form-submit" onclick="checkout()">Passer la commande</button>
        </div>
    </div>

    <!-- Panel d'administration -->
    <div id="adminPanel" class="admin-panel">
        <div class="admin-header">
            <h2><i class="fas fa-user-shield"></i> Administration LD Organics</h2>
            <button class="admin-close" onclick="closeAdminPanel()">&times;</button>
        </div>
        <div class="admin-content">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalProducts">0</div>
                    <div class="stat-label">Produits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalOrders">0</div>
                    <div class="stat-label">Commandes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalUsers">0</div>
                    <div class="stat-label">Utilisateurs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalRevenue">0,00 $</div>
                    <div class="stat-label">Revenu Total</div>
                </div>
            </div>
            
            <div class="admin-section">
                <h3><i class="fas fa-boxes"></i> Gestion des Produits</h3>
                <button class="admin-btn primary" onclick="showAddProductForm()">
                    <i class="fas fa-plus"></i> Ajouter un produit
                </button>
                
                <div id="addProductForm" style="display: none; margin-top: 20px;">
                    <form id="productForm" class="admin-form">
                        <div class="form-group">
                            <label for="productName">Nom du produit</label>
                            <input type="text" id="productName" required>
                        </div>
                        <div class="form-group">
                            <label for="productPrice">Prix ($)</label>
                            <input type="number" id="productPrice" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="productImage">URL de l'image</label>
                            <input type="url" id="productImage" required>
                        </div>
                        <div class="form-group full-width">
                            <label for="productDescription">Description</label>
                            <textarea id="productDescription" rows="3" required></textarea>
                        </div>
                        <div class="admin-actions">
                            <button type="submit" class="admin-btn primary">Enregistrer</button>
                            <button type="button" class="admin-btn secondary" onclick="hideAddProductForm()">Annuler</button>
                        </div>
                    </form>
                </div>
                
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Image</th>
                            <th>Nom</th>
                            <th>Prix</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="adminProductsList">
                        <!-- Produits affichés dynamiquement -->
                    </tbody>
                </table>
            </div>
            
            <div class="admin-section">
                <h3><i class="fas fa-users"></i> Gestion des Utilisateurs</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nom</th>
                            <th>Email</th>
                            <th>Téléphone</th>
                            <th>Statut</th>
                            <th>Permissions</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="adminUsersList">
                        <!-- Utilisateurs affichés dynamiquement -->
                    </tbody>
                </table>
            </div>
            
            <div class="admin-section">
                <h3><i class="fas fa-shopping-cart"></i> Gestion des Commandes</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID Commande</th>
                            <th>Client</th>
                            <th>Produits</th>
                            <th>Total</th>
                            <th>Date</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="adminOrdersList">
                        <!-- Commandes affichées dynamiquement -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Panel Opérateur de Commandes AMÉLIORÉ -->
    <div id="operatorPanel" class="admin-panel">
        <div class="admin-header">
            <h2><i class="fas fa-tasks"></i> Tableau de Bord Opérateur - LD Organics</h2>
            <button class="admin-close" onclick="closeOperatorPanel()">&times;</button>
        </div>
        <div class="admin-content">
            <!-- Statistiques opérateur -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="operatorTotalOrders">0</div>
                    <div class="stat-label">Total Commandes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="operatorPendingOrders">0</div>
                    <div class="stat-label">En Attente</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="operatorProcessingOrders">0</div>
                    <div class="stat-label">En Cours</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="operatorCompletedOrders">0</div>
                    <div class="stat-label">Terminées</div>
                </div>
            </div>
            
            <!-- Tableau de bord opérateur -->
            <div class="operator-dashboard">
                <div class="operator-widget">
                    <h4><i class="fas fa-exclamation-circle"></i> Commandes Prioritaires</h4>
                    <div class="stat-value" id="priorityOrders">0</div>
                    <div class="stat-label">Nécessitent une attention immédiate</div>
                </div>
                <div class="operator-widget">
                    <h4><i class="fas fa-clock"></i> En Retard</h4>
                    <div class="stat-value" id="lateOrders">0</div>
                    <div class="stat-label">Commandes non traitées depuis +48h</div>
                </div>
            </div>
            
            <div class="quick-actions">
                <button class="admin-btn warning" onclick="processPendingOrders()">
                    <i class="fas fa-bolt"></i> Traiter Toutes les En Attente
                </button>
                <button class="admin-btn info" onclick="exportOrdersCSV()">
                    <i class="fas fa-file-export"></i> Exporter en CSV
                </button>
                <button class="admin-btn secondary" onclick="showOrderStatistics()">
                    <i class="fas fa-chart-bar"></i> Statistiques
                </button>
            </div>
            
            <div class="search-filter">
                <input type="text" id="orderSearch" placeholder="Rechercher par client, produit ou ID..." onkeyup="filterOrdersTable()">
                <select id="statusFilter" onchange="filterOrdersTable()">
                    <option value="all">Tous les statuts</option>
                    <option value="pending">En attente</option>
                    <option value="processing">En cours</option>
                    <option value="shipped">Expédiées</option>
                    <option value="delivered">Livrées</option>
                    <option value="cancelled">Annulées</option>
                </select>
                <select id="priorityFilter" onchange="filterOrdersTable()">
                    <option value="all">Toutes les priorités</option>
                    <option value="high">Haute priorité</option>
                    <option value="medium">Priorité moyenne</option>
                    <option value="low">Basse priorité</option>
                </select>
            </div>
            
            <div class="bulk-actions">
                <div class="bulk-select">
                    <input type="checkbox" id="selectAllOrders" onchange="toggleSelectAllOrders()">
                    <label for="selectAllOrders">Sélectionner tout</label>
                </div>
                <button class="admin-btn info" onclick="bulkUpdateStatus('processing')" id="bulkProcessBtn" disabled>
                    <i class="fas fa-cog"></i> Traiter la sélection
                </button>
                <button class="admin-btn success" onclick="bulkUpdateStatus('shipped')" id="bulkShipBtn" disabled>
                    <i class="fas fa-shipping-fast"></i> Expédier la sélection
                </button>
            </div>
            
            <div class="admin-section">
                <h3><i class="fas fa-list"></i> Gestion des Commandes</h3>
                
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th><input type="checkbox" id="selectAllHeader" onchange="toggleSelectAllOrders()"></th>
                            <th>ID Commande</th>
                            <th>Client</th>
                            <th>Produits</th>
                            <th>Total</th>
                            <th>Date</th>
                            <th>Priorité</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="operatorOrdersList">
                        <!-- Commandes affichées dynamiquement -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Panel Mon Compte -->
    <div id="accountPanel" class="account-panel">
        <div class="account-header">
            <h2><i class="fas fa-user-circle"></i> Mon Compte</h2>
            <button class="account-close" onclick="closeAccountPanel()">&times;</button>
        </div>
        <div class="account-content">
            <div class="account-section">
                <h3><i class="fas fa-user"></i> Informations Personnelles</h3>
                <div class="account-info">
                    <div class="form-group">
                        <label for="accountName">Nom complet</label>
                        <input type="text" id="accountName" disabled>
                    </div>
                    <div class="form-group">
                        <label for="accountEmail">Email</label>
                        <input type="email" id="accountEmail" disabled>
                    </div>
                    <div class="form-group">
                        <label for="accountPhone">Numéro de téléphone</label>
                        <input type="tel" id="accountPhone">
                    </div>
                    <div class="form-group full-width">
                        <label for="accountAddress">Adresse</label>
                        <textarea id="accountAddress" rows="3"></textarea>
                    </div>
                </div>
                <div class="account-actions">
                    <button class="admin-btn primary" onclick="toggleEditAccount()" id="editAccountBtn">
                        <i class="fas fa-edit"></i> Modifier mes informations
                    </button>
                    <button class="admin-btn success" onclick="saveAccountInfo()" id="saveAccountBtn" style="display: none;">
                        <i class="fas fa-save"></i> Enregistrer les modifications
                    </button>
                    <button class="admin-btn secondary" onclick="cancelEditAccount()" id="cancelAccountBtn" style="display: none;">
                        <i class="fas fa-times"></i> Annuler
                    </button>
                </div>
            </div>
            
            <div class="account-section">
                <h3><i class="fas fa-history"></i> Historique des Commandes</h3>
                <div id="accountOrdersList">
                    <!-- Commandes de l'utilisateur affichées dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/products.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/operator.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/main.js"></script>
</body>
<footer>
    <p>&copy; 2025 LD Organics. Tous droits réservés.</p>
  </footer>
</html>